<mvc:View controllerName="logaligroup.empleados.controller.CreaEmpleado"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:form="sap.ui.layout.form"
    xmlns:f="sap.f"
    xmlns:l="sap.ui.layout"
    xmlns:u="sap.ui.unified">

    <NavContainer id="navCreaEmpleado">
        <pages>
            <f:DynamicPage id="dynamicPage" class="sapUiNoContentPadding" showFooter="true">
             
                <f:title>
                    <f:DynamicPageTitle>
                        <f:heading>
                            <Title text="{i18n>creaEmpleados}"/>
                        </f:heading>
                    </f:DynamicPageTitle>
                </f:title>
            
                <f:content>

                    <Wizard id="CreaEmpleadoWizard" complete="wizardCompletedHandler">
                        <WizardStep id="PasoTipoEmpleado" title="{i18n>tipoEmpleado}" validated="false">
                            <MessageStrip class="sapUiSmallMarginBottom" text="{i18n>msjePasoUno}" showIcon="true"/>

                            <Toolbar>
                                <ToolbarSpacer/>

                                <Button text="{i18n>emplInterno}" press="llamarPasoDos" class="sapUiSmallMarginEnd">
                                    <customData>
                                        <core:CustomData key="tipoEmpleado" value="empInterno"></core:CustomData>
                                    </customData>
                                </Button>
                                <Button text="{i18n>empAutonomo}" press="llamarPasoDos" class="sapUiSmallMarginEnd">
                                    <customData>
                                        <core:CustomData key="tipoEmpleado" value="empAutonomo"></core:CustomData>
                                    </customData>
                                </Button>
                                <Button text="{i18n>empGerente}" press="llamarPasoDos">
                                    <customData>
                                        <core:CustomData key="tipoEmpleado" value="empGerente"></core:CustomData>
                                    </customData>
                                </Button>
                                <ToolbarSpacer/>
                            </Toolbar>
                        </WizardStep>
                        <WizardStep id="PasoDatosEmpleado" title="{i18n>datosEmpleado}" validated="false">
                            <MessageStrip class="sapUiSmallMarginBottom" text="{i18n>msjePasoDos}" showIcon="true"/>
                            <form:SimpleForm editable="true">

                                <form:content>

                                    <Label text="{i18n>nombre}" required="true"/>
                                    <Input valueState="{/_FirstNameState}" change="dataEmployeeValidation" value="{/FirstName}"/>
                                    <Label text="{i18n>apellidos}" required="true"/>
                                    <Input valueState="{/_LastNameState}" change="dataEmployeeValidation" value="{/LastName}"/>
                                    <Label text="{= ${/_type} === 'empAutonomo' ? ${i18n>CIF} : ${i18n>DNI}}" required="true"/>
                                    <Input valueState="{/_DniState}" change="validaDNI" value="{/Dni}" />
                                    <Label text="{= ${/_type} === 'empAutonomo' ? ${i18n>precio} : ${i18n>salario}}"/>
                                    <l:VerticalLayout class="sapUiContentPadding" width="100%">

                                        <Slider value="{/_Salary}" enableTickmarks="true" min="12000" max="80000" step="1000" class="sapUiLargeMarginBottom" width="100%" visible="{=  ${/_type} === 'empInterno'}"/>

                                        <Slider value="{/_Salary}" enableTickmarks="true" min="100" max="2000" step="100" class="sapUiLargeMarginBottom" width="100%" visible="{=  ${/_type} === 'empAutonomo'}"/>

                                        <Slider value="{/_Salary}" enableTickmarks="true" min="50000" max="200000" step="1000" class="sapUiLargeMarginBottom" width="100%" visible="{=  ${/_type} === 'empGerente'}"/>


                                    </l:VerticalLayout>

                                    <Label text="{i18n>fechaIncorporacion}" required="true"></Label>
                                    <DatePicker dateValue="{/CreationDate}" valueState="{/_CreationDateState}" change="dataEmployeeValidation"></DatePicker>
                                </form:content>
                            </form:SimpleForm>
                        </WizardStep>

                        <WizardStep id="OptionalInfoStep" title="{i18n>infAdic}" validated="true" activate="optionalStepActivation">
                            <MessageStrip class="sapUiSmallMarginBottom" text="{i18n>msjePasoTres}" showIcon="true"/>

                            <Label text="{i18n>comentarios}" width="100%"></Label>
                            <TextArea value="{/Comments}" width="100%"></TextArea>

                            <UploadCollection id="UploadCollection" 
                                             maximumFilenameLength="55" 
                                            maximumFileSize="10" 
                                            multiple="true" 
                                            uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments" 
                                            sameFilenameAllowed="true" 
                                            instantUpload="false" change="cambiar" 
                                            beforeUploadStarts="onBeforeUploadStart" 
                                            noDataDescription="{i18n>arrastrarFicheros}" />

                        </WizardStep>
                    </Wizard>
                </f:content>
  

                 
                    <f:footer>
                        <OverflowToolbar>
                            <ToolbarSpacer/>
                            <Button text="{i18n>cancelar}" press="cancelar"/>
                        </OverflowToolbar>
                    </f:footer>
              

            </f:DynamicPage>


            <Page id="Revision" showHeader="false">
                <content>
                    <form:SimpleForm title="1. {i18n>tipoEmpleado}" minWidth="1024" editable="false" layout="ResponsiveGridLayout">
                        <form:content>
                            <Label text="{i18n>tipo}"/>
                            <Text text="{=${/_type} === 'empInterno' ? ${i18n>empInterno} : ${/_type} === 'empAutonomo' ? ${i18n>empAutonomo} : ${i18n>empGerente}}"/>
                            <Link text="{i18n>editar}" press="setearPasoUno"  />
                        </form:content>
                    </form:SimpleForm>

                    <form:SimpleForm title="2. {i18n>datosEmpleado}" minWidth="1024" editable="false" layout="ResponsiveGridLayout">
                        <form:content>
                            <Label text="{i18n>nombre}"/>
                            <Text text="{/FirstName}"/>
                            <Label text="{i18n>apellidos}"/>
                            <Text text="{/LastName}"/>
                            <Label text="{= ${/_type} === 'empAutonomo' ? ${i18n>CIF} : ${i18n>DNI}}"/>
                            <Text text="{/Dni}"/>
                            <Label text="{= ${/_type} === 'empAutonomo' ? ${i18n>precioDiario} : ${i18n>salarioBrutoAnual}}"/>
                            <Text text="{/_Salary}"/>
                            <Label text="{i18n>fechaIncorporacion}"/>
                            <Text text="{path:'/CreationDate',type:'sap.ui.model.type.Date'}"/>
                            <Link text="{i18n>editar}" press="setearPasoDos"  />
                        </form:content>
                    </form:SimpleForm>

                    <form:SimpleForm title="3. {i18n>infAdic}" minWidth="1024" editable="false" layout="ResponsiveGridLayout">
                        <form:content>
                            <Label text="{i18n>comentarios}"/>
                            <Text text="{/Comments}"/>
                            <Label text="{i18n>documentos}"/>
                            <Text text="{/_numFiles} {i18n>ficheros}"/>
                            <Label></Label>
                            <List items="{/_files}">
                                <items>
                                    <StandardListItem title="{DocName}"></StandardListItem>
                                </items>
                            </List>
                            <Link text="{i18n>editar}" press="setearPasoTres"  />
                        </form:content>
                    </form:SimpleForm>

                </content>

                <footer>
                    <Toolbar>
                        <ToolbarSpacer></ToolbarSpacer>
                        <Button text="{i18n>guardar}" press="salvarEmpleado"></Button>
                        <Button text="{i18n>cancelar}" press="cancelar"></Button>
                    </Toolbar>
                </footer>

            </Page>
        </pages>
    </NavContainer>

</mvc:View>